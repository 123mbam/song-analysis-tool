<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 Song Comparison Preview</title>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Archivo', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #E97451;
            color: #fff;
            padding: 40px;
            margin: 0;
        }

        h1 {
            font-size: 24px;
            font-weight: 800;
            text-transform: uppercase;
            margin-bottom: 30px;
            text-align: center;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }

        canvas {
            display: block;
            margin: 0 auto;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-text {
            font-size: 14px;
            font-weight: 600;
        }

        #comparisonTable {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            overflow: hidden;
            margin-top: 40px;
        }

        #comparisonTable th {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 12px;
            text-align: left;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        #comparisonTable td {
            padding: 12px;
            color: #fff;
            font-size: 13px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #comparisonTable tr:last-child td {
            border-bottom: none;
        }

        #comparisonTable tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        #comparisonTable td:first-child {
            font-weight: 600;
        }

        .score-cell {
            text-align: center;
            font-weight: 700;
        }

        .table-title {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            margin-top: 40px;
            margin-bottom: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Radar Chart Preview - 3 Song Comparison</h1>

    <div class="chart-container">
        <canvas id="radarChart" width="700" height="700"></canvas>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background: #8b5cf6;"></div>
                <div class="legend-text">Blinding Lights - The Weeknd</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #0ea5e9;"></div>
                <div class="legend-text">Bohemian Rhapsody - Queen</div>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #10b981;"></div>
                <div class="legend-text">Shape of You - Ed Sheeran</div>
            </div>
        </div>

        <h3 class="table-title">Quality Comparison</h3>
        <p style="font-size: 12px; font-weight: 400; margin-bottom: 20px; color: rgba(255, 255, 255, 0.8); line-height: 1.5; text-align: center;">Score represents the prominence or complexity of each musical quality on a scale of 1-10, where higher values indicate more distinctive or sophisticated use of that element.</p>
        <table id="comparisonTable"></table>
    </div>

    <script>
        // Sample data for 3 songs
        const analysis = {
            songs: [
                {
                    name: "Blinding Lights - The Weeknd",
                    data: [8, 7, 9, 7, 8, 6, 8, 9, 7, 8],
                    descriptions: [
                        "Catchy synth-driven melody",
                        "Verse-chorus structure with bridge",
                        "Rich 80s synth timbres",
                        "Layered synths and vocals",
                        "C# minor key",
                        "4/4 time signature",
                        "Minor chords with some maj7",
                        "Synthwave/retro pop",
                        "Love and longing themes",
                        "Reverb and stereo width"
                    ]
                },
                {
                    name: "Bohemian Rhapsody - Queen",
                    data: [9, 10, 8, 9, 7, 9, 9, 8, 9, 7],
                    descriptions: [
                        "Complex multi-section melodies",
                        "Through-composed, operatic structure",
                        "Piano, guitars, layered vocals",
                        "Dense multi-track harmonies",
                        "Bâ™­ major, multiple modulations",
                        "Multiple time signatures",
                        "Varied from simple to complex",
                        "Progressive rock/opera",
                        "Existential and narrative lyrics",
                        "Panning and dynamic range"
                    ]
                },
                {
                    name: "Shape of You - Ed Sheeran",
                    data: [7, 6, 7, 6, 7, 5, 6, 8, 8, 6],
                    descriptions: [
                        "Simple, repetitive hook",
                        "Standard verse-chorus form",
                        "Marimba-like synth sound",
                        "Minimal, sparse arrangement",
                        "C# minor key",
                        "4/4 time signature",
                        "Simple minor progressions",
                        "Pop with tropical house elements",
                        "Romantic and physical attraction",
                        "Clean mix with subtle effects"
                    ]
                }
            ]
        };

        function drawRadarChart(analysis) {
            const canvas = document.getElementById('radarChart');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 230;

            const qualities = [
                'Melody',
                'Form/Structure',
                'Timbre',
                'Texture',
                'Key',
                'Time Signature',
                'Chord Quality',
                'Genre/Style',
                'Lyrics',
                'Spatial Effects'
            ];

            const numQualities = qualities.length;
            const angleStep = (Math.PI * 2) / numQualities;

            const colors = [
                { line: '#8b5cf6', fill: 'rgba(139, 92, 246, 0.25)' },
                { line: '#0ea5e9', fill: 'rgba(14, 165, 233, 0.25)' },
                { line: '#10b981', fill: 'rgba(16, 185, 129, 0.25)' }
            ];

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw background circles
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, (radius / 5) * i, 0, Math.PI * 2);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = '#ccc';
            for (let i = 0; i < numQualities; i++) {
                const angle = angleStep * i - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;

                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
            }

            // Draw labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Archivo, sans-serif';
            ctx.fontWeight = '600';

            for (let i = 0; i < numQualities; i++) {
                const angle = angleStep * i - Math.PI / 2;
                const labelDistance = radius + 60;
                const x = centerX + Math.cos(angle) * labelDistance;
                const y = centerY + Math.sin(angle) * labelDistance;

                ctx.save();
                ctx.translate(x, y);
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                if (Math.abs(x - centerX) < 20) {
                    ctx.textAlign = 'center';
                } else if (x > centerX) {
                    ctx.textAlign = 'left';
                } else {
                    ctx.textAlign = 'right';
                }

                ctx.fillText(qualities[i], 0, 0);
                ctx.restore();
            }

            // Draw data for each song
            analysis.songs.forEach((song, songIndex) => {
                ctx.beginPath();
                ctx.fillStyle = colors[songIndex].fill;
                ctx.strokeStyle = colors[songIndex].line;
                ctx.lineWidth = 2.5;

                for (let i = 0; i < numQualities; i++) {
                    const angle = angleStep * i - Math.PI / 2;
                    const value = song.data[i];
                    const distance = (value / 10) * radius;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;

                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                ctx.closePath();
                ctx.fill();
                ctx.stroke();

                // Draw points
                ctx.fillStyle = colors[songIndex].line;
                for (let i = 0; i < numQualities; i++) {
                    const angle = angleStep * i - Math.PI / 2;
                    const value = song.data[i];
                    const distance = (value / 10) * radius;
                    const x = centerX + Math.cos(angle) * distance;
                    const y = centerY + Math.sin(angle) * distance;

                    ctx.beginPath();
                    ctx.arc(x, y, 4, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            // Draw scale labels
            ctx.fillStyle = '#999';
            ctx.font = '10px Archivo, sans-serif';
            ctx.textAlign = 'right';
            for (let i = 1; i <= 5; i++) {
                const value = (i * 2).toString();
                ctx.fillText(value, centerX - 10, centerY - (radius / 5) * i + 4);
            }

            // Populate comparison table
            const table = document.getElementById('comparisonTable');
            let tableHTML = '<thead><tr><th>Quality</th>';

            // Add song name headers (score + description columns for each song)
            analysis.songs.forEach(song => {
                tableHTML += `<th colspan="2">${song.name}</th>`;
            });
            tableHTML += '</tr><tr><th></th>';

            // Add Score/Description sub-headers
            analysis.songs.forEach(() => {
                tableHTML += `<th>Score</th><th>Description</th>`;
            });
            tableHTML += '</tr></thead><tbody>';

            // Add rows for each quality
            qualities.forEach((quality, index) => {
                tableHTML += `<tr><td>${quality}</td>`;
                analysis.songs.forEach(song => {
                    const score = song.data[index];
                    const description = song.descriptions ? song.descriptions[index] : '';
                    tableHTML += `<td class="score-cell">${score}/10</td>`;
                    tableHTML += `<td>${description}</td>`;
                });
                tableHTML += '</tr>';
            });

            tableHTML += '</tbody>';
            table.innerHTML = tableHTML;
        }

        // Draw the chart on page load
        drawRadarChart(analysis);
    </script>
</body>
</html>
